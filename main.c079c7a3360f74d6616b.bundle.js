(()=>{"use strict";const e=e=>new class{constructor(t=e){this.component=document.createElement(t.component)}getComponent(){return delete e.component,Object.keys(e).forEach((t=>{this.component[t]=e[t]})),this.component}}(e).getComponent(),t=t=>e({component:"p",...t}),s=t=>e({component:"input",...t}),n=t=>e({...t}),a=(()=>{const e=t({textContent:"Leaderboard",className:"header-logo"}),s=n({component:"header",className:"header"});return s.append(e),s})();const o=new class{constructor(){this.url="https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/JqyMjlAIfzoPkOxklElb/scores/"}promisedData=(e=null)=>{const t={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)};return(async()=>{let s;try{s=await(await fetch(this.url,e?t:[])).json()}catch(e){s=new Error("Oops ! Something went wrong ...").message}return s})()};get=async()=>await this.promisedData();post=async e=>{let t;return t=""!==e.user&&""!==e.score?await this.promisedData(e):new Error("Please fill the form, before submission ...").message,t}},c=document.querySelector(".playerList"),r=document.querySelector(".section-form"),l=e=>new Promise((t=>{setTimeout(t,e)})),i=t({className:"messages"});r.insertAdjacentElement("beforeend",i);const p=(s=!0)=>{(async()=>{const n=document.querySelector(".messages"),a=await o.get();if("string"==typeof a)return n.textContent=a,n.classList.add("warning"),await l(5e3),n.classList.remove("warning"),!1;const{result:r}=a;n.textContent=s?"Score Added Successfully":"List Updated Successfully ",n.className="messages",n.classList.add("success"),c.textContent="",r.forEach(((s,n)=>{const a=(o={className:"player",id:`playerID-${n+1}`},e({component:"li",...o}));var o;const r=t({className:"player_detail",textContent:`${s.user}: `}),l=(t=>e({component:"span",...t}))({className:"score",textContent:s.score});r.append(l),a.append(r),c.append(a)})),await l(2e3),n.classList.remove("success")})()},m=()=>{const n=document.querySelector(".section-refresh_container"),a=t({className:"player_detail",textContent:"!! Please Add Some Data !!"}),m=(u={textContent:"Refresh",className:"refresh-btn",onclick:()=>{p(!1),c.children.length<1&&c.append(a)}},e({component:"button",...u}));var u;n.appendChild(m);const d=s({type:"text",className:"input",placeholder:"Your name",ariaLabel:"please enter yourname"}),y=s({type:"number",className:"input",placeholder:"Your score",ariaLabel:"please try to attempy wisely"}),h=s({type:"submit",className:"input submit-btn",value:"Submit",ariaLabel:"please submit button to check result"}),f=(t=>e({component:"form",...t}))({className:"form",onsubmit:e=>{e.preventDefault();const t=d.value,s=y.value;(async()=>{const e=await o.post({user:t,score:s});"string"==typeof e?(i.textContent=e,i.classList.add("warning"),await l(5e3),i.classList.remove("warning")):(f.reset(),p())})()}});if(f.append(d,y,h),c.children.length<1){const e=document.querySelector(".messages");a.textContent="please wait...",e.textContent="please wait...",e.classList.add("process"),c.append(a)}p(!1),r.append(f)};(()=>{const e=n({component:"div"});return e.append(a,m()),e})()()})();